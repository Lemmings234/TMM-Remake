scripted_gui = {
	BNW_Nuclear_Program = {
		context_type = decision_category
		parent_window_token = decisions_category
		window_name = "BNW_Nuclear_Program"
			
		visible = {
			always = yes
		}
		properties = {
		}
		triggers = {
		}

		effects = {
			Decision_Program_Access_Button_click = {
				if = {
					limit = { 
						has_country_flag = BNW_Nuclear_Program_visible
					}
					clr_country_flag = BNW_Nuclear_Program_visible
				}
				else = {
					set_country_flag = BNW_Nuclear_Program_visible
				}
			}
		}
		dynamic_lists = {
		}
	}
}

scripted_gui = {
	BNW_Nuclear_Program_GUI = {
		context_type = player_context
		parent_window_token = "BNW_Nuclear_Program_GUI"
		window_name = "BNW_Nuclear_Program_GUI"
			
		visible = {
			has_country_flag = BNW_Nuclear_Program_visible
			NOT = {
				has_country_flag = AFTER_MIDNIGHT_COMMENCED
			}
		}
		properties = {
			Nuclear_Program_Stage_Small_Progressbar_Frame = {
				frame = Nuclear_Stage_Frame^parties_idx
			}
			Nuclear_Program_Stage_Images = {
				frame = Selected_Stage
			}
			Nuclear_Program_Progressbar_Current = {
				frame = Progress_Displayer
			}
			Nuclear_Program_Progressbar_Small = {
				frame = Nuclear_Progress^parties_idx
			}
			Nuclear_Program_Right_BG = {
				frame = Selected_Stage
			}
		}
		triggers = {
			Nuclear_Program_Stage_Minus_click_enabled = {
				NOT = { check_variable = { Selected_Stage = 1 } }
			}
			Nuclear_Program_Stage_Add_click_enabled = {
				AND = {
				    NOT = { check_variable = { Selected_Stage = 5 } }
					check_variable = { Selected_Stage < Current_Stage }
				}

			}
			Nuclear_Program_Invest_Minus_PP_click_enabled = {
				check_variable = { Nuclear_PP_Extra_Cost > 0 }
			}
			Nuclear_Program_Invest_Minus_Money_click_enabled = {
				check_variable = { Nuclear_Money_Extra_Cost > 0 }
			}
			Nuclear_Program_Invest_Minus_Research_click_enabled = {
				check_variable = { Nuclear_Research_Extra_Cost > 0 }
			}
			Nuclear_Program_Invest_Add_PP_click_enabled = {
				check_variable = { Nuclear_PP_Extra_Cost < 2.5 }
			}
			Nuclear_Program_Invest_Add_Research_click_enabled = {
				check_variable = { Nuclear_Research_Extra_Cost < 0.25 }
			}
			Nuclear_Program_Progressbar_Small_visible = {
				check_variable = { Nuclear_Stage_Frame^parties_idx = 1 }
			}
			Nuclear_Program_Interaction_Option_1_click_enabled = {
				NOT = { has_country_flag = Nuclear_Program_Option1_Cooldown }
				check_variable = { Selected_Stage = Current_Stage }
			}
			Nuclear_Program_Interaction_Option_2_click_enabled = {
				NOT = { has_country_flag = Nuclear_Program_Option2_Cooldown }
				check_variable = { Selected_Stage = Current_Stage }
			}
			Nuclear_Program_Interaction_Option_3_click_enabled = {
				NOT = { has_country_flag = Nuclear_Program_Option3_Cooldown }
				check_variable = { Selected_Stage = Current_Stage }
			}
			Nuclear_Program_Interaction_Option_4_click_enabled = {
				NOT = { has_country_flag = Nuclear_Program_Option4_Cooldown }
				OR = {
					AND = {
					    check_variable = { Current_Stage = 5 }
					    check_variable = { Nuclear_Progress^4 > 99 }
					}
                    AND = {
						NOT = { check_variable = { Current_Stage = 5 } }
					}
				}
				check_variable = { Selected_Stage = Current_Stage }
			}
			Nuclear_Program_Monthly_Increase_Fast_visible = {
				check_variable = { Nuclear_Program_Monthly > 10 }
			}
			Nuclear_Program_Monthly_Increase_visible = {
				check_variable = { Nuclear_Program_Monthly > 5 }
			}
			Nuclear_Program_Monthly_Increase_Slow_visible = {
				check_variable = { Nuclear_Program_Monthly > 1 }
			}
			Nuclear_Program_Monthly_Decrease_Fast_visible = {
				check_variable = { Nuclear_Program_Monthly < -1 }
			}
			Nuclear_Program_Monthly_Decrease_visible = {
				check_variable = { Nuclear_Program_Monthly < -5 }
			}
			Nuclear_Program_Monthly_Decrease_Slow_visible = {
				check_variable = { Nuclear_Program_Monthly < -10 }
			}
		}
		effects = {
			close_button_click = {
				clr_country_flag = BNW_Nuclear_Program_visible
			}
			Nuclear_Program_Stage_Minus_click = {
				subtract_from_variable = { Selected_Stage = 1 }
				BNWNuclearUpdate = yes
			}
			Nuclear_Program_Stage_Add_click = {
				add_to_variable = { Selected_Stage = 1 }
				BNWNuclearUpdate = yes
			}
			Nuclear_Program_Invest_Minus_PP_click = {
				subtract_from_variable = { Nuclear_PP_Extra_Cost = 0.2 }
				subtract_from_variable = { Nuclear_Program_Monthly = 0.1 }
				subtract_from_variable = { Nuclear_PP_Extra = 0.1 }
			}
			Nuclear_Program_Invest_Add_PP_click = {
				add_to_variable = { Nuclear_PP_Extra_Cost = 0.2 }
				add_to_variable = { Nuclear_Program_Monthly = 0.1 }
				add_to_variable = { Nuclear_PP_Extra = 0.1 }
			}
			Nuclear_Program_Invest_Minus_Research_click = {
				subtract_from_variable = { Nuclear_Research_Extra_Cost = 0.025 }
				subtract_from_variable = { Nuclear_Program_Monthly = 0.075 }
				subtract_from_variable = { Nuclear_Research_Extra = 0.075 }
				BNWUpdateCosts = yes
			}
			Nuclear_Program_Invest_Add_Research_click = {
				add_to_variable = { Nuclear_Research_Extra_Cost = 0.025 }
				add_to_variable = { Nuclear_Program_Monthly = 0.075 }
				add_to_variable = { Nuclear_Research_Extra = 0.075 }
				BNWUpdateCosts = yes
			}
			Nuclear_Program_Invest_Minus_Money_click = {
				subtract_from_variable = { Nuclear_Money_Extra_Cost = 10 }
				subtract_from_variable = { Nuclear_Program_Monthly = 0.1 }
				subtract_from_variable = { Nuclear_Money_Extra = 0.1 }
				BNWUpdateCosts = yes
			}
			Nuclear_Program_Invest_Add_Money_click = {
				add_to_variable = { Nuclear_Money_Extra_Cost = 10 }
				add_to_variable = { Nuclear_Program_Monthly = 0.1 }
				add_to_variable = { Nuclear_Money_Extra = 0.1 }
				BNWUpdateCosts = yes
			}
			Nuclear_Program_Interaction_Option_1_click = {
				set_country_flag = Nuclear_Program_Option1_Cooldown
				BNWNuclearEffect = yes
			}
			Nuclear_Program_Interaction_Option_2_click = {
				set_country_flag = Nuclear_Program_Option2_Cooldown
				BNWNuclearEffect = yes
			}
			Nuclear_Program_Interaction_Option_3_click = {
				set_country_flag = Nuclear_Program_Option3_Cooldown
				BNWNuclearEffect = yes
			}
			Nuclear_Program_Interaction_Option_4_click = {
				set_country_flag = Nuclear_Program_Option4_Cooldown
				BNWNuclearEffect = yes
			}
		}
		dynamic_lists = {
			BNW_stages_list = {
				array = Nuclear_Stage
				change_scope = no
				entry_container = BNW_Nuclear_Stages_container
				index = parties_idx
			}
		}
	}
	#BNW_Nuclear_Stages_container = {
	#	context_type = player_context
	#	parent_window_token = "BNW_Nuclear_Program_GUI"
	#	window_name = "BNW_Nuclear_Program_GUI"
	#		
	#	visible = {
	#		has_country_flag = BNW_Nuclear_Program_visible
	#		NOT = {
	#			has_country_flag = AFTER_MIDNIGHT_COMMENCED
	#		}
	#	}
	#	properties = {
	#		Nuclear_Program_Stage_Small_Progressbar_Frame = {
	#			frame = 2
	#		}
	#	}
	#	triggers = {
	#	}
	#	effects = {
	#	}
	#	dynamic_lists = {
	#	}
	#}
}