add_namespace = TAF

country_event = {
    id = TAF.1
	title = TAF.1.t
	desc = TAF.1.d
	picture = GFX_Speech_of_Sheng
    is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = "TAF.1.a"
        country_event = { id = TAF.2 days = 15 } 
	}
}

country_event = {
    id = TAF.2
	title = TAF.2.t
	desc = TAF.2.d
	picture = GFX_The_Carrier
    is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = "TAF.2.a"
        country_event = { id = TAF.3 days = 17 }
    }
    option = {
		name = "TAF.2.b"
        country_event = { id = TAF.3 days = 17 }
    }
}

country_event = {
    id = TAF.3
	title = TAF.3.t
	desc = TAF.3.d
	picture = GFX_Railway_Station
    is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = "TAF.3.a"
        country_event = { id = TAF.4 days = 20 } 
	}
}

country_event = {
    id = TAF.4
	title = TAF.4.t
	desc = TAF.4.d
	picture = GFX_Inspect_warehouse
    is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = "TAF.4.a"
	}
    option = {
		name = "TAF.4.b"
	}
}

country_event = {  ## NA in Dihua
    id = TAF.100
	title = TAF.100.t
	desc = TAF.100.d
	picture = GFX_Inspect_warehouse
    is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = TAF.100.a
        add_to_variable = {
            CSX_national_army_power = 1
        }
	}
}

country_event = {  ## CPC in Dihua
    id = TAF.101
	title = TAF.101.t
	desc = TAF.101.d
	picture = GFX_Inspect_warehouse
    is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = TAF.101.a
	}
}

country_event = {  ## CPC & NA 
    id = TAF.102
	title = TAF.102.t
	desc = TAF.102.d
	picture = GFX_Inspect_warehouse
    is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = TAF.102.a
        hidden_effect = {
            load_oob = "UST_1962"
        }
        CSX_Ishaq_Beg = {
            add_field_marshal_role = {
                traits = { National_Army old_guard inflexible_strategist career_officer infantry_officer }
			    skill = 3
			    attack_skill = 2
			    defense_skill = 2
			    planning_skill = 2
			    logistics_skill = 2
            }
        }
        CSX_Muhemmetimin_Iminof = {
            add_corps_commander_role = {
                traits = { National_Army cavalry_officer cavalry_leader career_officer }
			    skill = 2
			    attack_skill = 2
			    defense_skill = 2
			    planning_skill = 2
			    logistics_skill = 2
            }
        }
        CSX_Caudanov_Zayir = {
            add_corps_commander_role = {
                traits = { National_Army infantry_officer winter_expert }
			    skill = 2
			    attack_skill = 1
			    defense_skill = 2
			    planning_skill = 1
			    logistics_skill = 1
            }
        }
        CSX_Ivan_Polinov = {
            add_corps_commander_role = {
                traits = { National_Army old_guard career_officer infantry_officer infantry_leader infantry_expert }
			    skill = 4
			    attack_skill = 2
			    defense_skill = 4
			    planning_skill = 3
			    logistics_skill = 3
            }
        }
        CSX_Delilqan_Sugurbayf = {
            add_corps_commander_role = {
            	traits = { National_Army politically_connected cavalry_officer winter_expert }
			    skill = 2
			    attack_skill = 1
			    defense_skill = 1
			    planning_skill = 1
			    logistics_skill = 1
            }
        }
	}
}

country_event = {  ## Delete Division
    id = TAF.103
	title = TAF.103.t
	desc = TAF.103.d
	picture = GFX_Inspect_warehouse
    is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = TAF.103.a
        hidden_effect = {
            delete_units = {
                division_template = "Minbing Shi II"
            }
        }
	}
}


country_event = {   ## National Army Spilt
    id = TAF.200
	title = TAF.200.t
	desc = TAF.200.d
	picture = GFX_Inspect_warehouse
    is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = TAF.200.a
        hidden_effect = {
            UST = {
                transfer_state = 1971
                every_owned_state = {
                    limit = { NOT = { is_core_of = UST } }
                    add_core_of = PREV
                }
                set_cosmetic_tag = UST_national_army
                load_oob = "UST_1962"
            }
            CSX = {
                set_autonomy = {
                    target = UST
                    autonomy_state = autonomy_free
                }
                CSX_Ehmetjan_Qasimi = {
                    remove_advisor_role = {
                        slot = head_of_government
                    }
                }
                CSX_Abdukirim_Abbasof = {
                    add_advisor_role = {
                        advisor = {
                            slot = head_of_government
                            idea_token = CSX_Abdukirim_Abbasof_hog
                            allowed = { original_tag = CSX }
                            available = {
                            has_government = communist
                            }
                            traits = { head_of_government tinder_keeper }
                            ledger = civilian
                            cost = -1
                            removal_cost = -1
                            ai_will_do = { factor = 0 }
                        }
                    }
                    add_ideas = {
                        CSX_Abdukirim_Abbasof_hog
                    }
                }
            }
            UST = {
                set_politics = {
                    ruling_party = socialist
                    last_election = "1962.1.1"
        	        election_frequency = 48
        	        elections_allowed = no
                }
                set_popularities = {
                    communist = 52
                    socialist = 48
                    progressivism = 0
                    liberalism = 0
                    conservatism = 0
                    paternalism = 0
                    despotism = 0
                    fascism = 0
                    national_socialism = 0
                    ultranationalism = 0
                }
                add_ideas = {
                    Aim_on_Dihua
                }
            }
        }
	}
}

country_event = {  ## Lin Boya
    id = TAF.998
	title = TAF.998.t
	desc = TAF.998.d
	picture = GFX_Envoy_To_The_Anarchist_Soviet
    is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = TAF.998.a
        
        retire_character = XIN_Sheng_Shicai
        retire_character = XIN_Xinjiang_Collapesd_Gov

        add_popularity = { ideology = paternalism popularity = 0.8 }
        add_popularity = { ideology = conservatism popularity = 0.5 }
        add_popularity = { ideology = liberalism popularity = 0.3 }
	    
        XIN_Lin_Boya = {
		    add_country_leader_role = {
			    country_leader = {
			        ideology = paternalism_provisional_government_subtype
			        traits = {  }
			        expire = "1999.1.1.1"
			        id = -1
		        }  
		        promote_leader = yes
	        }
	    }

        XIN = {
            set_cosmetic_tag = Xinjiang_Province
            set_politics = {
                ruling_party = paternalism
            }
        }
	}

    option = {
		name = TAF.998.b
        
        retire_character = XIN_Sheng_Shicai
        retire_character = XIN_Xinjiang_Collapesd_Gov

        add_popularity = { ideology = paternalism popularity = 0.8 }
	    
        XIN_Lin_Boya = {
		    add_country_leader_role = {
			    country_leader = {
			        ideology = paternalism_provisional_government_subtype
			        traits = {  }
			        expire = "1999.1.1.1"
			        id = -1
		        }  
		        promote_leader = yes
	        }
	    }

        XIN = {
            set_cosmetic_tag = Xinjiang_Admin
            set_politics = {
                ruling_party = paternalism
            }
        }
	}
}


country_event = {  ## Sheng Shicai dies
    id = TAF.999
	title = TAF.999.t
	desc = TAF.999.d
	picture = GFX_Envoy_To_The_Anarchist_Soviet
    is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = TAF.999.a
        
        add_stability = -0.3
        add_war_support = -0.5
        add_political_power = -200
        
        retire_character = XIN_Sheng_Shicai

        add_popularity = { ideology = communist popularity = -1.00 }
        add_popularity = { ideology = socialist popularity = -1.00 }
        add_popularity = { ideology = ultranationalism popularity = 0.15 }
	    
        XIN_Xinjiang_Collapesd_Gov = {
		    add_country_leader_role = {
			    country_leader = {
			        ideology = despotism_warlordism_subtype
			        traits = {  }
			        expire = "1999.1.1.1"
			        id = -1
		        }  
		        promote_leader = yes
	        }
	    }
        
        XIN = {
            remove_ideas = {
                XIN_Where_Are_They
                XIN_The_Crumbling_Six_Policies
                XIN_Orphan_of_Asia
            }
            add_ideas = {
                XIN_Collapsed_Gov
            }
            load_focus_tree = empty_tree
        }
        country_event = { id = TAF.1000 days = 2 }
	}
}
	
country_event = {	## Endings
	id = TAF.1000
	title = TAF.1000.t
	desc = TAF.1000.d
	picture = GFX_Envoy_To_The_Anarchist_Soviet
    is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = TAF.1000.a
		hidden_effect = {
            CSX = {
                transfer_state = 1991
                every_owned_state = {
                    limit = { NOT = { is_core_of = CSX } }
                    add_core_of = PREV
                }
                add_ideas = {
                    Partial_Victory
                    Bird_out_of_cage
                }
            }
            CSX_Spilt_startup = yes
            
            GAN = {
                transfer_state = 957
            }

            UST = {
                transfer_state = 617
                transfer_state = 1992
                every_owned_state = {
                    limit = { NOT = { is_core_of = UST } }
                    add_core_of = PREV
                }
                add_ideas = {
                    Partial_Victory
                }
            }
            

            UFR = {
                transfer_state = 619
                transfer_state = 958
                transfer_state = 1998
                transfer_state = 1997
                transfer_state = 1994
                transfer_state = 1964
                every_owned_state = {
                    limit = { NOT = { is_core_of = UFR } }
                    add_core_of = PREV
                }
                add_ideas = {
                    Partial_Victory
                }
            }
            

            KZX = {
                transfer_state = 618
                transfer_state = 1996
                every_owned_state = {
                    limit = { NOT = { is_core_of = KZX } }
                    add_core_of = PREV
                }
                add_ideas = {
                    Partial_Victory
                }
            }          
        }
    }    
    option = {  
        name = TAF.1000.b
        hidden_effect = {
            CSX = {
                transfer_state = 1991
                transfer_state = 1992
                transfer_state = 618
                every_owned_state = {
                    limit = { NOT = { is_core_of = CSX } }
                    add_core_of = PREV
                }
                load_oob = "CSX_1962"
                add_ideas = {
                    Aim_on_Dihua
                    Cadres
                }
            }
            CSX_Civil_War_startup = yes
            UFR = {
                transfer_state = 619
                transfer_state = 958
                transfer_state = 1998
                transfer_state = 1994
                transfer_state = 1997
                transfer_state = 1964
            }
        }
        CSX = { 
            change_tag_from = ROOT 
        }
    }
}

country_event = {  ## Xinjiang Riot
    id = TAF.1001
	title = TAF.1001.t
	desc = TAF.1001.d
	picture = GFX_Envoy_To_The_Anarchist_Soviet
    is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = TAF.1001.a
        XIN = {
            declare_war_on = {
                target = UST
                type = annex_everything
            }
            declare_war_on = {
                target = CSX
                type = annex_everything
            }
            declare_war_on = {
                target = KZX
                type = annex_everything
            }
        }
        UST = {
            declare_war_on = {
                target = CSX
                type = annex_everything
            }
            declare_war_on = {
                target = KZX
                type = annex_everything
            }
        }
        KZX = {
            declare_war_on = {
                target = CSX
                type = annex_everything
            }
        }
        news_event = {
            id = taf.world.4
        }
	}
}